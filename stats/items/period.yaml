- title:  "周期统计测试"
  route:  "test"
  author: 
    author: "Larry"
    email: "guonan@doweidu.com"
  access: ["admin"]
  direction: 'landscape'
  total: True
  periods:
    unit: "month"
    span: [1, 1, 1, 1, 1, 1]
    accumulate: False
  stats:
        - id: "active_user"
          name: "注册用户"
          source: 'iqg_ro'
          code: "select count(0) from user where created_at>='{start_date}' and created_at<'{end_date}';"
        - id: "total_brand"
          name: "新增品牌"
          source: 'iqg_ro'
          code: "select count(0) from brand where created_at>='{start_date}' and created_at<'{end_date}';"
        - id: "total_branch"
          name: "新增门店"
          source: 'iqg_ro'
          code: "select count(0) from branch where created_at>='{start_date}' and created_at<'{end_date}';"
        - id: "order_count"
          name: "订单数"
          source: 'iqg_ro'
          code: "select count(0) from product_order where created_at>='{start_date}' and created_at<'{end_date}';"
        - id: "paid_order_count"
          name: "第三方支付订单数"
          source: 'iqg_ro'
          code: "select count(0) from product_order o left join order_payment_record opr on o.id=opr.product_order_id where opr.is_active=1 and opr.payment_method>1 and o.trade_status=1 and o.created_at>'{start_date}' and o.created_at<'{end_date}';"
        - id: "order_total_amount"
          name: "订单总额"
          source: 'iqg_ro'
          code: "select ROUND(sum(price), 2) from product_order where type<4 and trade_status=1 and created_at>'{start_date}' and created_at<'{end_date}';"
        - id: "order_total_income"
          name: "第三方支付总额"
          source: 'iqg_ro'
          code: "select ROUND(sum(opr.amount), 2) from product_order o left join order_payment_record opr on o.id=opr.product_order_id where opr.is_active=1 and opr.payment_method>1 and o.trade_status=1 and o.created_at>'{start_date}' and o.created_at<'{end_date}';"
